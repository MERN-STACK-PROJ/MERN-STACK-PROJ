# Settings in the [build] context are global and are applied to
# all contexts unless otherwise overridden by more specific contexts.
[build]
# Directory where the build system installs dependencies
# and runs your build. Store your package.json, .nvmrc, etc here.
# If not set, defaults to the root directory.
base = "frontend/"

# Directory that contains the deploy-ready HTML files and
# assets generated by the build. This is an absolute path relative 
# to the base directory, which is the root by default (/).
# This sample publishes the directory located at the absolute 
# path "root/project/build-output"

publish = "dist/"

# Default build command.
command = "npm run build"

[[plugins]]
# Installs the Lighthouse Build Plugin for all deploy contexts
package = "@netlify/plugin-lighthouse"
[[plugins.inputs.settings]]
# Run Lighthouse on every deploy
autoRun = true
# Run Lighthouse on the deploy preview context
deployPreview = true
# Run Lighthouse on the production context
production = true
# Run Lighthouse on the branch deploy context
branchDeploy = true
# Run Lighthouse on the deploy preview context
deployPreview = true
# Run Lighthouse with a desktop first approach
preset = "desktop"
locale = "nl"

# Deploy Preview context: all deploys generated from
# a pull/merge request will inherit these settings.
[context.deploy-preview]
publish = "dist/"

# Dev context: environment variables set here
# are available for local development environments
# run using Netlify Dev. These values can be
# overwritten on branches that have a more specific
# branch context configured.
[context.dev.environment]
NODE_ENV = "development"

# For contexts of branches with special characters,
# enclose the branch name with quotes.
[context."feat/branch"]
command = "echo 'special branch'"
base = "branch"

# Redirects and headers are GLOBAL for all builds â€“ they do not
# get scoped to contexts no matter where you define them in the file.
# For context-specific rules, use _headers or _redirects files,
# which are PER-DEPLOY.

# The following redirect is intended for use with most SPAs
# that handle routing internally.
[[redirects]]
from = "/*"
to = "/index.html"
status = 200

[[headers]]
# Define which paths this specific [[headers]] block will cover.
for = "/*"

[headers.values]
X-Frame-Options = "DENY"
X-XSS-Protection = "1; mode=block"
Content-Security-Policy = "default-src 'self' *;"

# Multi-value headers are expressed with multi-line strings.
cache-control = '''
  no-store,
  no-cache,
  must-revalidate,
  max-age=0'''


# Basic-Auth allows you to password protect your whole site.
# This feature may not be available on all plans.
Basic-Auth = "someuser:somepassword anotheruser:anotherpassword"

[functions]
# Directory with serverless functions, including background
# functions, to deploy. This is an absolute path relative to the 
# base directory, which is the root by default (/).
directory = "functions/"

# Use [dev] to set configuration overrides for local
# development environments run using Netlify Dev - except
# for environment variables. Environment variables for Netlify
# Dev should be set under [context.dev.environment] instead.
[dev]
command = "yarn start"
port = 8888
publish = "dist"
